name: Run scorecard-action
on:
  pull_request:
    branches: [ main ]

jobs:
    scorecard:
      runs-on: ubuntu-latest
      permissions:
        id-token: write
        security-events: write
        statuses: write
      steps:
        - uses: raghavkaul/scorecard-action@HEAD
          with:
            results_file: results.sarif
            results_format: sarif
            # publish_results: true
        
            # Upload the results as artifacts (optional). Commenting out will disable
        # uploads of run results in SARIF format to the repository Actions tab.
        # https://docs.github.com/en/actions/advanced-guides/storing-workflow-data-as-artifacts
        - name: "Upload artifact"
          uses: actions/upload-artifact@0b2256b8c012f0828dc542b3febcab082c67f72b # v4.3.4
          with:
            name: SARIF file
            path: results.sarif
            retention-days: 5
